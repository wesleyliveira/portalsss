import{router as Xt}from"@inertiajs/core";import{createHeadManager as Z,router as x}from"@inertiajs/core";import{computed as b,defineComponent as ee,h as $,markRaw as V,reactive as te,ref as D,shallowRef as re}from"vue";import{router as j}from"@inertiajs/core";import Q from"lodash.clonedeep";var z={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,t=j.restore(e),n=this.$options.remember.data.filter(o=>!(this[o]!==null&&typeof this[o]=="object"&&this[o].__rememberable===!1)),s=o=>this[o]!==null&&typeof this[o]=="object"&&typeof this[o].__remember=="function"&&typeof this[o].__restore=="function";n.forEach(o=>{this[o]!==void 0&&t!==void 0&&t[o]!==void 0&&(s(o)?this[o].__restore(t[o]):this[o]=t[o]),this.$watch(o,()=>{j.remember(n.reduce((l,u)=>({...l,[u]:Q(s(u)?this[u].__remember():this[u])}),{}),e)},{immediate:!0,deep:!0})})}},R=z;import{router as S}from"@inertiajs/core";import P from"lodash.clonedeep";import G from"lodash.isequal";import{reactive as K,watch as X}from"vue";function C(e,t){let n=typeof e=="string"?e:null,s=typeof e=="string"?t:e,o=n?S.restore(n):null,l=typeof s=="object"?P(s):P(s()),u=null,f=null,d=r=>r,y=K({...o?o.data:P(l),isDirty:!1,errors:o?o.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(l).reduce((r,i)=>(r[i]=this[i],r),{})},transform(r){return d=r,this},defaults(r,i){if(typeof s=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof r>"u"?l=this.data():l=Object.assign({},P(l),typeof r=="string"?{[r]:i}:r),this},reset(...r){let i=typeof s=="object"?P(l):P(s()),a=P(i);return r.length===0?(l=a,Object.assign(this,i)):Object.keys(i).filter(c=>r.includes(c)).forEach(c=>{l[c]=a[c],this[c]=i[c]}),this},setError(r,i){return Object.assign(this.errors,typeof r=="string"?{[r]:i}:r),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...r){return this.errors=Object.keys(this.errors).reduce((i,a)=>({...i,...r.length>0&&!r.includes(a)?{[a]:this.errors[a]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(r,i,a={}){let c=d(this.data()),v={...a,onCancelToken:p=>{if(u=p,a.onCancelToken)return a.onCancelToken(p)},onBefore:p=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(f),a.onBefore)return a.onBefore(p)},onStart:p=>{if(this.processing=!0,a.onStart)return a.onStart(p)},onProgress:p=>{if(this.progress=p,a.onProgress)return a.onProgress(p)},onSuccess:async p=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,f=setTimeout(()=>this.recentlySuccessful=!1,2e3);let F=a.onSuccess?await a.onSuccess(p):null;return l=P(this.data()),this.isDirty=!1,F},onError:p=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(p),a.onError)return a.onError(p)},onCancel:()=>{if(this.processing=!1,this.progress=null,a.onCancel)return a.onCancel()},onFinish:p=>{if(this.processing=!1,this.progress=null,u=null,a.onFinish)return a.onFinish(p)}};r==="delete"?S.delete(i,{...v,data:c}):S[r](i,c,v)},get(r,i){this.submit("get",r,i)},post(r,i){this.submit("post",r,i)},put(r,i){this.submit("put",r,i)},patch(r,i){this.submit("patch",r,i)},delete(r,i){this.submit("delete",r,i)},cancel(){u&&u.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(r){Object.assign(this,r.data),this.setError(r.errors)}});return X(y,r=>{y.isDirty=!G(y.data(),l),n&&S.remember(P(r.__remember()),n)},{immediate:!0,deep:!0}),y}var g=D(null),m=D(null),w=re(null),k=D(null),O=null,oe=ee({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:t,resolveComponent:n,titleCallback:s,onHeadUpdate:o}){g.value=t?V(t):null,m.value=e,k.value=null;let l=typeof window>"u";return O=Z(l,s,o),l||(x.init({initialPage:e,resolveComponent:n,swapComponent:async u=>{g.value=V(u.component),m.value=u.page,k.value=u.preserveState?k.value:Date.now()}}),x.on("navigate",()=>O.forceUpdate())),()=>{if(g.value){g.value.inheritAttrs=!!g.value.inheritAttrs;let u=$(g.value,{...m.value.props,key:k.value});return w.value&&(g.value.layout=w.value,w.value=null),g.value.layout?typeof g.value.layout=="function"?g.value.layout($,u):(Array.isArray(g.value.layout)?g.value.layout:[g.value.layout]).concat(u).reverse().reduce((f,d)=>(d.inheritAttrs=!!d.inheritAttrs,$(d,{...m.value.props},()=>f))):u}}}}),M=oe,N={install(e){x.form=C,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>x}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>m.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>O}),e.mixin(R)}};function ne(){return te({props:b(()=>m.value?.props),url:b(()=>m.value?.url),component:b(()=>m.value?.component),version:b(()=>m.value?.version),clearHistory:b(()=>m.value?.clearHistory),deferredProps:b(()=>m.value?.deferredProps),mergeProps:b(()=>m.value?.mergeProps),scrollRegions:b(()=>m.value?.scrollRegions),rememberedState:b(()=>m.value?.rememberedState),encryptHistory:b(()=>m.value?.encryptHistory)})}import{router as se,setupProgress as ie}from"@inertiajs/core";import{createSSRApp as ae,h as le}from"vue";async function L({id:e="app",resolve:t,setup:n,title:s,progress:o={},page:l,render:u}){let f=typeof window>"u",d=f?null:document.getElementById(e),y=l||JSON.parse(d.dataset.page),r=c=>Promise.resolve(t(c)).then(v=>v.default||v),i=[],a=await Promise.all([r(y.component),se.decryptHistory().catch(()=>{})]).then(([c])=>n({el:d,App:M,props:{initialPage:y,initialComponent:c,resolveComponent:r,titleCallback:s,onHeadUpdate:f?v=>i=v:null},plugin:N}));if(!f&&o&&ie(o),f){let c=await u(ae({render:()=>le("div",{id:e,"data-page":JSON.stringify(y),innerHTML:a?u(a):""})}));return{head:i,body:c}}}import{defineComponent as ue}from"vue";var pe=ue({name:"Deferred",props:{data:{type:[String,Array],required:!0}},render(){let e=Array.isArray(this.$props.data)?this.$props.data:[this.$props.data];if(!this.$slots.fallback)throw new Error("`<Deferred>` requires a `<template #fallback>` slot");return e.every(t=>this.$page.props[t]!==void 0)?this.$slots.default():this.$slots.fallback()}});import{defineComponent as ce}from"vue";var fe=ce({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let t=Object.keys(e.props).reduce((n,s)=>{let o=e.props[s];return["key","head-key"].includes(s)?n:o===""?n+` ${s}`:n+` ${s}="${o}"`},"");return`<${e.type}${t}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((t,n)=>t+this.renderTag(n),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.type}>`),t},addTitleElement(e){return this.title&&!e.find(t=>t.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(t=>this.resolveNode(t)).map(t=>this.renderTag(t)).filter(t=>t))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(t=>this.resolveNode(t)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),de=fe;import{mergeDataIntoQueryString as me,router as _,shouldIntercept as E}from"@inertiajs/core";import{computed as A,defineComponent as he,h as ge,onMounted as ye,onUnmounted as ve,ref as H}from"vue";var be=he({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"},async:{type:Boolean,default:!1},prefetch:{type:[Boolean,String,Array],default:!1},cacheFor:{type:[Number,String,Array],default:0},onStart:{type:Function,default:e=>{}},onProgress:{type:Function,default:()=>{}},onFinish:{type:Function,default:()=>{}},onBefore:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onCancelToken:{type:Function,default:()=>{}}},setup(e,{slots:t,attrs:n}){let s=H(0),o=H(null),l=(()=>e.prefetch===!0?["hover"]:e.prefetch===!1?[]:Array.isArray(e.prefetch)?e.prefetch:[e.prefetch])(),u=(()=>e.cacheFor!==0?e.cacheFor:l.length===1&&l[0]==="click"?0:3e4)();ye(()=>{l.includes("mount")&&p()}),ve(()=>{clearTimeout(o.value)});let f=e.method.toLowerCase(),d=f!=="get"?"button":e.as.toLowerCase(),y=A(()=>me(f,e.href||"",e.data,e.queryStringArrayFormat)),r=A(()=>y.value[0]),i=A(()=>y.value[1]),a=A(()=>({a:{href:r.value},button:{type:"button"}})),c={data:i.value,method:f,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??f!=="get",only:e.only,except:e.except,headers:e.headers,async:e.async},v={...c,onCancelToken:e.onCancelToken,onBefore:e.onBefore,onStart:h=>{s.value++,e.onStart(h)},onProgress:e.onProgress,onFinish:h=>{s.value--,e.onFinish(h)},onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError},p=()=>{_.prefetch(r.value,c,{cacheFor:u})},F={onClick:h=>{E(h)&&(h.preventDefault(),_.visit(r.value,v))}},J={onMouseenter:()=>{o.value=setTimeout(()=>{p()},75)},onMouseleave:()=>{clearTimeout(o.value)},onClick:F.onClick},Y={onMousedown:h=>{E(h)&&(h.preventDefault(),p())},onMouseup:h=>{h.preventDefault(),_.visit(r.value,v)},onClick:h=>{E(h)&&h.preventDefault()}};return()=>ge(d,{...n,...a.value[d]||{},"data-loading":s.value>0?"":void 0,...(()=>l.includes("hover")?J:l.includes("click")?Y:F)()},t)}}),Pe=be;import{router as Te}from"@inertiajs/core";import{onMounted as Fe,onUnmounted as Se}from"vue";function B(e,t={},n={keepAlive:!1,autoStart:!0}){let{stop:s,start:o}=Te.poll(e,t,{...n,autoStart:!1});return Fe(()=>{(n.autoStart??!0)&&o()}),Se(()=>{s()}),{stop:s,start:o}}import{router as T}from"@inertiajs/core";import{onMounted as Ce,onUnmounted as ke,ref as I}from"vue";function q(e={}){let t=I(!1),n=I(null),s=I(!1),o=typeof window>"u"?null:T.getCached(window.location.pathname,e),l=typeof window>"u"?null:T.getPrefetching(window.location.pathname,e);n.value=o?.staleTimestamp||null,t.value=l!==null,s.value=o!==null;let u,f;return Ce(()=>{f=T.on("prefetching",d=>{d.detail.visit.url.pathname===window.location.pathname&&(t.value=!0)}),u=T.on("prefetched",d=>{d.detail.visit.url.pathname===window.location.pathname&&(t.value=!1,s.value=!0)})}),ke(()=>{u(),f()}),{lastUpdatedAt:n,isPrefetching:t,isPrefetched:s,flush:()=>T.flush(window.location.pathname,e)}}import{router as U}from"@inertiajs/core";import xe from"lodash.clonedeep";import{isReactive as Ae,reactive as $e,ref as we,watch as Oe}from"vue";function W(e,t){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=U.restore(t),s=Ae(e)?$e:we,o=typeof e.__remember=="function"&&typeof e.__restore=="function",l=s(n===void 0?e:o?e.__restore(n):n);return Oe(l,u=>{U.remember(xe(o?e.__remember():u),t)},{immediate:!0,deep:!0}),l}import{router as De}from"@inertiajs/core";import{defineComponent as _e,h as Ee}from"vue";var Ie=_e({name:"WhenVisible",props:{data:{type:[String,Array]},params:{type:Object},buffer:{type:Number,default:0},as:{type:String,default:"div"},always:{type:Boolean,default:!1}},data(){return{loaded:!1,fetching:!1,observer:null}},unmounted(){this.observer?.disconnect()},mounted(){this.observer=new IntersectionObserver(e=>{if(!e[0].isIntersecting||(this.$props.always||this.observer.disconnect(),this.fetching))return;this.fetching=!0;let t=this.getReloadParams();De.reload({...t,onStart:n=>{this.fetching=!0,t.onStart?.(n)},onFinish:n=>{this.loaded=!0,this.fetching=!1,t.onFinish?.(n)}})},{rootMargin:`${this.$props.buffer}px`}),this.observer.observe(this.$el.nextSibling)},methods:{getReloadParams(){if(this.$props.data)return{only:Array.isArray(this.$props.data)?this.$props.data:[this.$props.data]};if(!this.$props.params)throw new Error("You must provide either a `data` or `params` prop.");return this.$props.params}},render(){let e=[];return(this.$props.always||!this.loaded)&&e.push(Ee(this.$props.as)),this.loaded?this.$slots.default&&e.push(this.$slots.default()):e.push(this.$slots.fallback?this.$slots.fallback():null),e}});export{pe as Deferred,de as Head,Pe as Link,Ie as WhenVisible,L as createInertiaApp,Xt as router,C as useForm,ne as usePage,B as usePoll,q as usePrefetch,W as useRemember};
//# sourceMappingURL=index.esm.js.map
