var ce=Object.create;var O=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var de=Object.getOwnPropertyNames;var me=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var ge=(e,t)=>{for(var n in t)O(e,n,{get:t[n],enumerable:!0})},J=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of de(t))!he.call(e,r)&&r!==n&&O(e,r,{get:()=>t[r],enumerable:!(s=fe(t,r))||s.enumerable});return e};var D=(e,t,n)=>(n=e!=null?ce(me(e)):{},J(t||!e||!e.__esModule?O(n,"default",{value:e,enumerable:!0}):n,e)),ye=e=>J(O({},"__esModule",{value:!0}),e);var Fe={};ge(Fe,{Deferred:()=>ee,Head:()=>re,Link:()=>oe,WhenVisible:()=>ae,createInertiaApp:()=>H,router:()=>le.router,useForm:()=>$,usePage:()=>X,usePoll:()=>B,usePrefetch:()=>q,useRemember:()=>W});module.exports=ye(Fe);var le=require("@inertiajs/core");var k=require("@inertiajs/core"),u=require("vue");var M=require("@inertiajs/core"),Y=D(require("lodash.clonedeep"),1),ve={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,t=M.router.restore(e),n=this.$options.remember.data.filter(r=>!(this[r]!==null&&typeof this[r]=="object"&&this[r].__rememberable===!1)),s=r=>this[r]!==null&&typeof this[r]=="object"&&typeof this[r].__remember=="function"&&typeof this[r].__restore=="function";n.forEach(r=>{this[r]!==void 0&&t!==void 0&&t[r]!==void 0&&(s(r)?this[r].__restore(t[r]):this[r]=t[r]),this.$watch(r,()=>{M.router.remember(n.reduce((l,p)=>({...l,[p]:(0,Y.default)(s(p)?this[p].__remember():this[p])}),{}),e)},{immediate:!0,deep:!0})})}},Q=ve;var A=require("@inertiajs/core"),T=D(require("lodash.clonedeep"),1),z=D(require("lodash.isequal"),1),_=require("vue");function $(e,t){let n=typeof e=="string"?e:null,s=typeof e=="string"?t:e,r=n?A.router.restore(n):null,l=typeof s=="object"?(0,T.default)(s):(0,T.default)(s()),p=null,d=null,m=o=>o,b=(0,_.reactive)({...r?r.data:(0,T.default)(l),isDirty:!1,errors:r?r.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(l).reduce((o,i)=>(o[i]=this[i],o),{})},transform(o){return m=o,this},defaults(o,i){if(typeof s=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof o>"u"?l=this.data():l=Object.assign({},(0,T.default)(l),typeof o=="string"?{[o]:i}:o),this},reset(...o){let i=typeof s=="object"?(0,T.default)(l):(0,T.default)(s()),a=(0,T.default)(i);return o.length===0?(l=a,Object.assign(this,i)):Object.keys(i).filter(f=>o.includes(f)).forEach(f=>{l[f]=a[f],this[f]=i[f]}),this},setError(o,i){return Object.assign(this.errors,typeof o=="string"?{[o]:i}:o),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...o){return this.errors=Object.keys(this.errors).reduce((i,a)=>({...i,...o.length>0&&!o.includes(a)?{[a]:this.errors[a]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(o,i,a={}){let f=m(this.data()),P={...a,onCancelToken:c=>{if(p=c,a.onCancelToken)return a.onCancelToken(c)},onBefore:c=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(d),a.onBefore)return a.onBefore(c)},onStart:c=>{if(this.processing=!0,a.onStart)return a.onStart(c)},onProgress:c=>{if(this.progress=c,a.onProgress)return a.onProgress(c)},onSuccess:async c=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,d=setTimeout(()=>this.recentlySuccessful=!1,2e3);let w=a.onSuccess?await a.onSuccess(c):null;return l=(0,T.default)(this.data()),this.isDirty=!1,w},onError:c=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(c),a.onError)return a.onError(c)},onCancel:()=>{if(this.processing=!1,this.progress=null,a.onCancel)return a.onCancel()},onFinish:c=>{if(this.processing=!1,this.progress=null,p=null,a.onFinish)return a.onFinish(c)}};o==="delete"?A.router.delete(i,{...P,data:f}):A.router[o](i,f,P)},get(o,i){this.submit("get",o,i)},post(o,i){this.submit("post",o,i)},put(o,i){this.submit("put",o,i)},patch(o,i){this.submit("patch",o,i)},delete(o,i){this.submit("delete",o,i)},cancel(){p&&p.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(o){Object.assign(this,o.data),this.setError(o.errors)}});return(0,_.watch)(b,o=>{b.isDirty=!(0,z.default)(b.data(),l),n&&A.router.remember((0,T.default)(o.__remember()),n)},{immediate:!0,deep:!0}),b}var v=(0,u.ref)(null),g=(0,u.ref)(null),N=(0,u.shallowRef)(null),E=(0,u.ref)(null),L=null,be=(0,u.defineComponent)({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:t,resolveComponent:n,titleCallback:s,onHeadUpdate:r}){v.value=t?(0,u.markRaw)(t):null,g.value=e,E.value=null;let l=typeof window>"u";return L=(0,k.createHeadManager)(l,s,r),l||(k.router.init({initialPage:e,resolveComponent:n,swapComponent:async p=>{v.value=(0,u.markRaw)(p.component),g.value=p.page,E.value=p.preserveState?E.value:Date.now()}}),k.router.on("navigate",()=>L.forceUpdate())),()=>{if(v.value){v.value.inheritAttrs=!!v.value.inheritAttrs;let p=(0,u.h)(v.value,{...g.value.props,key:E.value});return N.value&&(v.value.layout=N.value,N.value=null),v.value.layout?typeof v.value.layout=="function"?v.value.layout(u.h,p):(Array.isArray(v.value.layout)?v.value.layout:[v.value.layout]).concat(p).reverse().reduce((d,m)=>(m.inheritAttrs=!!m.inheritAttrs,(0,u.h)(m,{...g.value.props},()=>d))):p}}}}),G=be,K={install(e){k.router.form=$,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>k.router}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>g.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>L}),e.mixin(Q)}};function X(){return(0,u.reactive)({props:(0,u.computed)(()=>g.value?.props),url:(0,u.computed)(()=>g.value?.url),component:(0,u.computed)(()=>g.value?.component),version:(0,u.computed)(()=>g.value?.version),clearHistory:(0,u.computed)(()=>g.value?.clearHistory),deferredProps:(0,u.computed)(()=>g.value?.deferredProps),mergeProps:(0,u.computed)(()=>g.value?.mergeProps),scrollRegions:(0,u.computed)(()=>g.value?.scrollRegions),rememberedState:(0,u.computed)(()=>g.value?.rememberedState),encryptHistory:(0,u.computed)(()=>g.value?.encryptHistory)})}var I=require("@inertiajs/core"),j=require("vue");async function H({id:e="app",resolve:t,setup:n,title:s,progress:r={},page:l,render:p}){let d=typeof window>"u",m=d?null:document.getElementById(e),b=l||JSON.parse(m.dataset.page),o=f=>Promise.resolve(t(f)).then(P=>P.default||P),i=[],a=await Promise.all([o(b.component),I.router.decryptHistory().catch(()=>{})]).then(([f])=>n({el:m,App:G,props:{initialPage:b,initialComponent:f,resolveComponent:o,titleCallback:s,onHeadUpdate:d?P=>i=P:null},plugin:K}));if(!d&&r&&(0,I.setupProgress)(r),d){let f=await p((0,j.createSSRApp)({render:()=>(0,j.h)("div",{id:e,"data-page":JSON.stringify(b),innerHTML:a?p(a):""})}));return{head:i,body:f}}}var Z=require("vue"),ee=(0,Z.defineComponent)({name:"Deferred",props:{data:{type:[String,Array],required:!0}},render(){let e=Array.isArray(this.$props.data)?this.$props.data:[this.$props.data];if(!this.$slots.fallback)throw new Error("`<Deferred>` requires a `<template #fallback>` slot");return e.every(t=>this.$page.props[t]!==void 0)?this.$slots.default():this.$slots.fallback()}});var te=require("vue"),Pe=(0,te.defineComponent)({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let t=Object.keys(e.props).reduce((n,s)=>{let r=e.props[s];return["key","head-key"].includes(s)?n:r===""?n+` ${s}`:n+` ${s}="${r}"`},"");return`<${e.type}${t}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((t,n)=>t+this.renderTag(n),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.type}>`),t},addTitleElement(e){return this.title&&!e.find(t=>t.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(t=>this.resolveNode(t)).map(t=>this.renderTag(t)).filter(t=>t))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(t=>this.resolveNode(t)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),re=Pe;var F=require("@inertiajs/core"),h=require("vue"),Te=(0,h.defineComponent)({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"},async:{type:Boolean,default:!1},prefetch:{type:[Boolean,String,Array],default:!1},cacheFor:{type:[Number,String,Array],default:0},onStart:{type:Function,default:e=>{}},onProgress:{type:Function,default:()=>{}},onFinish:{type:Function,default:()=>{}},onBefore:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onCancelToken:{type:Function,default:()=>{}}},setup(e,{slots:t,attrs:n}){let s=(0,h.ref)(0),r=(0,h.ref)(null),l=(()=>e.prefetch===!0?["hover"]:e.prefetch===!1?[]:Array.isArray(e.prefetch)?e.prefetch:[e.prefetch])(),p=(()=>e.cacheFor!==0?e.cacheFor:l.length===1&&l[0]==="click"?0:3e4)();(0,h.onMounted)(()=>{l.includes("mount")&&c()}),(0,h.onUnmounted)(()=>{clearTimeout(r.value)});let d=e.method.toLowerCase(),m=d!=="get"?"button":e.as.toLowerCase(),b=(0,h.computed)(()=>(0,F.mergeDataIntoQueryString)(d,e.href||"",e.data,e.queryStringArrayFormat)),o=(0,h.computed)(()=>b.value[0]),i=(0,h.computed)(()=>b.value[1]),a=(0,h.computed)(()=>({a:{href:o.value},button:{type:"button"}})),f={data:i.value,method:d,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??d!=="get",only:e.only,except:e.except,headers:e.headers,async:e.async},P={...f,onCancelToken:e.onCancelToken,onBefore:e.onBefore,onStart:y=>{s.value++,e.onStart(y)},onProgress:e.onProgress,onFinish:y=>{s.value--,e.onFinish(y)},onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError},c=()=>{F.router.prefetch(o.value,f,{cacheFor:p})},w={onClick:y=>{(0,F.shouldIntercept)(y)&&(y.preventDefault(),F.router.visit(o.value,P))}},ue={onMouseenter:()=>{r.value=setTimeout(()=>{c()},75)},onMouseleave:()=>{clearTimeout(r.value)},onClick:w.onClick},pe={onMousedown:y=>{(0,F.shouldIntercept)(y)&&(y.preventDefault(),c())},onMouseup:y=>{y.preventDefault(),F.router.visit(o.value,P)},onClick:y=>{(0,F.shouldIntercept)(y)&&y.preventDefault()}};return()=>(0,h.h)(m,{...n,...a.value[m]||{},"data-loading":s.value>0?"":void 0,...(()=>l.includes("hover")?ue:l.includes("click")?pe:w)()},t)}}),oe=Te;var ne=require("@inertiajs/core"),R=require("vue");function B(e,t={},n={keepAlive:!1,autoStart:!0}){let{stop:s,start:r}=ne.router.poll(e,t,{...n,autoStart:!1});return(0,R.onMounted)(()=>{(n.autoStart??!0)&&r()}),(0,R.onUnmounted)(()=>{s()}),{stop:s,start:r}}var x=require("@inertiajs/core"),S=require("vue");function q(e={}){let t=(0,S.ref)(!1),n=(0,S.ref)(null),s=(0,S.ref)(!1),r=typeof window>"u"?null:x.router.getCached(window.location.pathname,e),l=typeof window>"u"?null:x.router.getPrefetching(window.location.pathname,e);n.value=r?.staleTimestamp||null,t.value=l!==null,s.value=r!==null;let p,d;return(0,S.onMounted)(()=>{d=x.router.on("prefetching",m=>{m.detail.visit.url.pathname===window.location.pathname&&(t.value=!0)}),p=x.router.on("prefetched",m=>{m.detail.visit.url.pathname===window.location.pathname&&(t.value=!1,s.value=!0)})}),(0,S.onUnmounted)(()=>{p(),d()}),{lastUpdatedAt:n,isPrefetching:t,isPrefetched:s,flush:()=>x.router.flush(window.location.pathname,e)}}var U=require("@inertiajs/core"),se=D(require("lodash.clonedeep"),1),C=require("vue");function W(e,t){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=U.router.restore(t),s=(0,C.isReactive)(e)?C.reactive:C.ref,r=typeof e.__remember=="function"&&typeof e.__restore=="function",l=s(n===void 0?e:r?e.__restore(n):n);return(0,C.watch)(l,p=>{U.router.remember((0,se.default)(r?e.__remember():p),t)},{immediate:!0,deep:!0}),l}var ie=require("@inertiajs/core"),V=require("vue"),ae=(0,V.defineComponent)({name:"WhenVisible",props:{data:{type:[String,Array]},params:{type:Object},buffer:{type:Number,default:0},as:{type:String,default:"div"},always:{type:Boolean,default:!1}},data(){return{loaded:!1,fetching:!1,observer:null}},unmounted(){this.observer?.disconnect()},mounted(){this.observer=new IntersectionObserver(e=>{if(!e[0].isIntersecting||(this.$props.always||this.observer.disconnect(),this.fetching))return;this.fetching=!0;let t=this.getReloadParams();ie.router.reload({...t,onStart:n=>{this.fetching=!0,t.onStart?.(n)},onFinish:n=>{this.loaded=!0,this.fetching=!1,t.onFinish?.(n)}})},{rootMargin:`${this.$props.buffer}px`}),this.observer.observe(this.$el.nextSibling)},methods:{getReloadParams(){if(this.$props.data)return{only:Array.isArray(this.$props.data)?this.$props.data:[this.$props.data]};if(!this.$props.params)throw new Error("You must provide either a `data` or `params` prop.");return this.$props.params}},render(){let e=[];return(this.$props.always||!this.loaded)&&e.push((0,V.h)(this.$props.as)),this.loaded?this.$slots.default&&e.push(this.$slots.default()):e.push(this.$slots.fallback?this.$slots.fallback():null),e}});
//# sourceMappingURL=index.js.map
